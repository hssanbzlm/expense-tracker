<ng-container
  [ngTemplateOutlet]="
    inEmailForm ? emailForm : inCodeForm ? codeForm : passwordForm
  "
>
</ng-container>

<ng-template #emailForm>
  <div
    class="w-100 h-100 d-flex justify-content-center align-items-center flex-column"
  >
    <form
      [formGroup]="emailFormGroup"
      (ngSubmit)="onSumbitEmailForm()"
      class="p-1"
    >
      <input
        (focus)="onInputFocus()"
        [disabled]="submit"
        formControlName="email"
        type="text"
        placeholder="email"
        [ngClass]="emailFormGroup.get('email').errors ? 'error' : 'success'"
        class="col-12 col-sm-auto rounded"
      />
      <button
        class="btn btn-light mt-2 mt-sm-0 ms-0 ms-sm-2"
        [disabled]="submit || emailFormGroup.invalid"
        type="submit"
      >
        Send
      </button>
      <div *ngIf="errorMsg.length">{{ errorMsg }}</div>
    </form>
  </div>
</ng-template>

<ng-template #codeForm>
  <div
    class="w-100 h-100 d-flex justify-content-center align-items-start flex-column"
  >
    <div class="container ms-3 ms-sm-0">
      <form
        [formGroup]="codeFormGroup"
        (ngSubmit)="onSubmitCodeForm()"
        class="row justify-content-sm-center justify-content-start"
      >
        <input
          [disabled]="submit"
          formControlName="code"
          type="number"
          placeholder="code"
          (focus)="onInputFocus()"
          [ngClass]="codeFormGroup.get('code').errors ? 'error' : 'success'"
          class="col-8 col-sm-auto rounded"
        />
        <div class="btn-group mt-2 mt-sm-0 ms-0 p-0 ms-sm-2 col-6 col-sm-auto">
          <button
            [disabled]="submit || codeFormGroup.invalid"
            type="submit"
            class="btn btn-primary me-2 text-white rounded"
          >
            Confirm
          </button>
          <button (click)="backToEmailForm()" class="btn btn-secondary rounded">
            Back
          </button>
        </div>
        <div class="row justify-content-sm-center justify-content-start">
          <div *ngIf="errorMsg.length" class="text-danger w-25 mt-2 p-0">
            {{ errorMsg }}
          </div>
        </div>
      </form>
    </div>
  </div>
</ng-template>
<ng-template #passwordForm>
  <div
    class="w-75 w-lg-50 h-100 container d-flex justify-content-center align-items-center flex-column"
  >
    <form
      [formGroup]="passwordFormGroup"
      (ngSubmit)="onSubmitPasswordForm()"
      class="row g-0 justify-content-start"
    >
      <input
        [disabled]="submit"
        formControlName="newPassword"
        type="password"
        placeholder="password"
        [ngClass]="
          passwordFormGroup.get('newPassword').errors ? 'error' : 'success'
        "
        class="col-10 mb-2 rounded"
      />
      <input
        [disabled]="submit"
        formControlName="retypeNewPassword"
        type="password"
        placeholder="retype password"
        [ngClass]="
          passwordFormGroup.get('retypeNewPassword').errors ||
          passwordFormGroup.invalid
            ? 'error'
            : 'success'
        "
        class="col-10 ms-0 rounded"
      />
      <div class="btn-group mt-2 w-50">
        <button
          class="btn btn-primary ms-0 text-white rounded"
          [disabled]="submit || passwordFormGroup.invalid"
          type="submit"
        >
          Save
        </button>
        <button (click)="backToCodeForm()" class="btn btn-light ms-2 rounded">
          Back
        </button>
        <div *ngIf="errorMsg.length">{{ errorMsg }}</div>
      </div>
    </form>
  </div>
</ng-template>
